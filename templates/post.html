{% extends "base.html" %}
{% block main %}

{# Landing page for a series: title + TOC linking to per-chapter pages #}
<div class="page-grid">
  <header class="article header-span-2">
    <h1>{{ post.title }}</h1>
    <p class="muted">
      {{ post.date }}{% if post.tags %} Â· {{ post.tags|join(", ") }}{% endif %}
    </p>
  </header>
</div>

{# Table of Contents linking to /posts/<series>/<chapter-slug>/ #}
{% if post.sections and post.sections|length > 0 %}
  <nav class="page-grid">
    <aside class="article header-span-2 toc">
      <strong>Contents</strong>
      <ul>
        {% for s in post.sections %}
          <li>
            <a href="{{ base }}/posts/{{ post.slug }}/{{ s.section_slug }}/">
              {{ s.title or ('Chapter ' ~ loop.index) }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </aside>
  </nav>
{% endif %}

{# Optional: if you want an intro paragraph on the landing, you can add a first "html" section without title #}
{% for s in post.sections if (not s.title) and s.type == 'html' %}
  <section class="row-grid">
    <div class="row-main">{{ s.html | safe }}</div>
  </section>
{% endfor %}

{% endblock %}
